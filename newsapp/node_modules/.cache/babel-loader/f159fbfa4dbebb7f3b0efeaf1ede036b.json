{"ast":null,"code":"import React,{Component}from\"react\";import NewsItem from\"./NewsItem\";import Spinner from\"./Spinner\";import InfiniteScroll from\"react-infinite-scroll-component\";//import LoadingBar from 'react-top-loading-bar';\nexport class News extends Component{constructor(){super();this.capitalizeFirstLetter=string=>{return string.charAt(0).toUpperCase()+string.slice(1);};this.handlePrevClick=async()=>{this.setState({page:this.state.page-1});this.updateNews();};this.handleNextClick=async()=>{this.setState({page:this.state.page+1});this.updateNews();};this.fetchMoreData=async()=>{this.setState({page:this.state.page+1});const url=\"https://newsapi.org/v2/top-headlines?country=\".concat(this.props.country,\"&category=\").concat(this.props.category,\"&apiKey=\").concat(this.props.apiKey,\"&page=\").concat(this.state.page,\"&pageSize=\").concat(this.props.pageSize);let data=await fetch(url);let parsedData=await data.json();this.setState({articles:this.state.articles.concat(parsedData.articles),totalResults:parsedData.totalResults});};this.state={articles:[],loading:true,page:1,totalResults:0};}async updateNews(){this.props.setProgress(10);const url=\"https://newsapi.org/v2/top-headlines?country=\".concat(this.props.country,\"&category=\").concat(this.props.category,\"&apiKey=\").concat(this.props.apiKey,\"&page=\").concat(this.state.page,\"&pageSize=\").concat(this.props.pageSize);this.setState({loading:true});let data=await fetch(url);this.props.setProgress(30);let parsedData=await data.json();this.props.setProgress(70);this.setState({articles:parsedData.articles,totalResults:parsedData.totalResults,loading:false});this.props.setProgress(100);}async componentDidMount(){this.updateNews();}render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h1\",{className:\"text-center\",style:{margin:'35px 0px'}},\"NewsMonkey - Top \",this.capitalizeFirstLetter(this.props.category),\" Headlines\"),this.state.loading&&/*#__PURE__*/React.createElement(Spinner,null),/*#__PURE__*/React.createElement(InfiniteScroll,{dataLength:this.state.articles.length,next:this.fetchMoreData,hasMore:this.state.articles.length!==this.state.totalResults,loader:/*#__PURE__*/React.createElement(Spinner,null)},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},this.state.articles.map(element=>{return/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4\",key:element.url},/*#__PURE__*/React.createElement(NewsItem,{title:element.title?element.title:\"\",description:element.description?element.description:\"\",imageUrl:element.urlToImage,newsUrl:element.url,author:element.author,date:element.publishedAt,source:element.source.name}));})))));}}News.defaultProps={country:\"in\",pageSize:8,category:\"general\"};export default News;","map":{"version":3,"names":["React","Component","NewsItem","Spinner","InfiniteScroll","News","constructor","capitalizeFirstLetter","string","charAt","toUpperCase","slice","handlePrevClick","setState","page","state","updateNews","handleNextClick","fetchMoreData","url","concat","props","country","category","apiKey","pageSize","data","fetch","parsedData","json","articles","totalResults","loading","setProgress","componentDidMount","render","createElement","Fragment","className","style","margin","dataLength","length","next","hasMore","loader","map","element","key","title","description","imageUrl","urlToImage","newsUrl","author","date","publishedAt","source","name","defaultProps"],"sources":["E:/React/newsapp/src/component/News.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport NewsItem from \"./NewsItem\";\r\nimport Spinner from \"./Spinner\";\r\nimport PropTypes from \"prop-types\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n//import LoadingBar from 'react-top-loading-bar';\r\nexport class News extends Component {\r\n  static defaultProps = {\r\n    country: \"in\",\r\n    pageSize: 8,\r\n    category: \"general\",\r\n  };\r\n  static propTypes = {\r\n    country: PropTypes.string,\r\n    pageSize: PropTypes.number,\r\n    category: PropTypes.string,\r\n  };\r\n  capitalizeFirstLetter = (string) => {\r\n    return string.charAt(0).toUpperCase() + string.slice(1);\r\n  }\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      articles: [],\r\n      loading: true,\r\n      page: 1,\r\n      totalResults:0\r\n    };\r\n  }\r\n\r\n  async updateNews() {\r\n    this.props.setProgress(10);\r\n    const url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=${this.props.apiKey}&page=${this.state.page}&pageSize=${this.props.pageSize}`;\r\n    this.setState({ loading: true });\r\n    let data = await fetch(url);\r\n    this.props.setProgress(30);\r\n    let parsedData = await data.json()\r\n    this.props.setProgress(70);\r\n    this.setState({\r\n        articles: parsedData.articles,\r\n        totalResults: parsedData.totalResults,\r\n        loading: false, \r\n    })\r\n    this.props.setProgress(100);\r\n}\r\nasync componentDidMount() {\r\n    this.updateNews();\r\n}\r\n\r\nhandlePrevClick = async () => {\r\n    this.setState({ page: this.state.page - 1 });\r\n    this.updateNews();\r\n}\r\n\r\nhandleNextClick = async () => {\r\n    this.setState({ page: this.state.page + 1 });\r\n    this.updateNews()\r\n}\r\n\r\nfetchMoreData = async () => {  \r\n    this.setState({page: this.state.page + 1})\r\n    const url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=${this.props.apiKey}&page=${this.state.page}&pageSize=${this.props.pageSize}`;\r\n    let data = await fetch(url);\r\n    let parsedData = await data.json()\r\n    this.setState({\r\n        articles: this.state.articles.concat(parsedData.articles),\r\n        totalResults: parsedData.totalResults\r\n    })\r\n  };\r\n  render() {\r\n    return (\r\n        <>\r\n            <h1 className=\"text-center\" style={{ margin: '35px 0px' }}>NewsMonkey - Top {this.capitalizeFirstLetter(this.props.category)} Headlines</h1>\r\n            {this.state.loading && <Spinner />}\r\n            <InfiniteScroll\r\n                dataLength={this.state.articles.length}\r\n                next={this.fetchMoreData}\r\n                hasMore={this.state.articles.length !== this.state.totalResults}\r\n                loader={<Spinner/>}\r\n            > \r\n                <div className=\"container\">\r\n                     \r\n                <div className=\"row\">\r\n                    {this.state.articles.map((element) => {\r\n                        return <div className=\"col-md-4\" key={element.url}>\r\n                            <NewsItem title={element.title ? element.title : \"\"} description={element.description ? element.description : \"\"} imageUrl={element.urlToImage} newsUrl={element.url} author={element.author} date={element.publishedAt} source={element.source.name} />\r\n                        </div>\r\n                    })}\r\n                </div>\r\n                </div> \r\n            </InfiniteScroll>\r\n\r\n        </>\r\n    )\r\n}\r\n}\r\n\r\nexport default News"],"mappings":"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"},"metadata":{},"sourceType":"module"}